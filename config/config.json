{
  "camera": {
    "index": 0,
    "resolution": {
      "width": 1280,
      "height": 720
    },
    "fps": 30,
    "picamera": {
      "exposure": {
        "mode": "auto", 
        "manual_exposure_us": 10000, 
        "manual_analogue_gain": 1.0
      },
      "awb": {
        "mode": "auto"
      }
    }
  },
  "photo": {
    "save_full_frame": true,
    "crop_padding": 40,
    "extra_top": 30,
    "preview_draw_crop_box": true,
    "jpeg_quality": 95,
    "use_high_res_still": true,
    "still_resolution": { "width": 1640, "height": 1232 },
    "still_settle_ms": 700
  },
  "image_processing": {
    "prefer_isp_color": true,
    "denoise_enabled": true,
    "denoise_h": 10,
    "denoise_hColor": 10,
    "denoise_templateWindowSize": 7,
    "denoise_searchWindowSize": 21,
    "awb_grayworld_enabled": false,
    "clahe_enabled": false,
    "clahe_clip_limit": 2.0,
    "clahe_tile_grid": 8,
    "sharpen_enabled": false,
    "sharpen_amount": 0.4,
    "sharpen_sigma": 0.9,
    "neutral_balance_enabled": false,
    "neutral_balance_strength": 0.4
  },
  "logging": {
    "level": "INFO",
    "log_dir": "logs"
  },
  "school_schedule": {
    "morning_class": {
      "start_time": "07:00",
      "end_time": "12:00",
      "login_window_start": "06:30",
      "login_window_end": "07:30",
      "logout_window_start": "11:30",
      "logout_window_end": "12:30",
      "late_threshold_minutes": 15
    },
    "afternoon_class": {
      "start_time": "13:00",
      "end_time": "17:00",
      "login_window_start": "12:30",
      "login_window_end": "13:30",
      "logout_window_start": "16:30",
      "logout_window_end": "17:30",
      "late_threshold_minutes": 15
    },
    "auto_detect_session": true,
    "allow_early_arrival": true,
    "require_logout": true,
    "duplicate_scan_cooldown_minutes": 5
  },
  "cloud": {
    "enabled": true,
    "provider": "supabase",
    "url": "${SUPABASE_URL}",
    "api_key": "${SUPABASE_KEY}",
    "device_id": "${DEVICE_ID}",
    "sync_interval": 60,
    "sync_on_capture": true,
    "offline_queue_size": 1000,
    "retry_attempts": 3,
    "retry_delay": 30,
    "roster_sync": {
      "auto_sync_on_boot": true,
      "sync_time": "06:00",
      "cache_expiry_hours": 24,
      "auto_wipe_after_class": true,
      "class_end_time": "17:30"
    }
  },
  "lighting": {
    "enabled": true,
    "adaptive_exposure": false,
    "brightness_threshold": 80,
    "contrast_threshold": 40,
    "auto_brightness_adjust": false,
    "histogram_equalization": false,
    "low_light_mode": "off"
  },
  "buzzer": {
    "enabled": true,
    "gpio_pin": 17,
    "qr_detected_pattern": [100, 50, 100],
    "face_detected_pattern": [50],
    "success_pattern": [200, 100, 200, 100, 200],
    "error_pattern": [1000],
    "duplicate_pattern": [100, 100, 100, 100, 100]
  },
  "offline_mode": {
    "enabled": true,
    "queue_limit": 1000,
    "auto_sync_when_online": true,
    "check_connection_interval": 30,
    "fallback_mode": "local_only",
    "timeout": 5,
    "test_url": "https://www.google.com"
  },
  "sms_notifications": {
    "enabled": true,
    "username": "${SMS_USERNAME}",
    "password": "${SMS_PASSWORD}",
    "device_id": "${SMS_DEVICE_ID}",
    "api_url": "${SMS_API_URL}",
    "login_message_template": "üìö ATTENDANCE ALERT üìö\n\nGood day, Parent/Guardian!\n\nYour child {student_name} (Student ID: {student_id}) has successfully CHECKED IN to school.\n\n‚è∞ Time: {time}\nüìÖ Date: {date}\n‚úÖ Status: Present\n\nüìä View full attendance:\n{attendance_link}\n\nThank you for your continued support!\n\n- Mabini High School\n  Automated Attendance System",
    "logout_message_template": "üè´ DEPARTURE NOTIFICATION üè´\n\nGood day, Parent/Guardian!\n\nYour child {student_name} (Student ID: {student_id}) has successfully CHECKED OUT from school.\n\n‚è∞ Time: {time}\nüìÖ Date: {date}\n‚úÖ Status: Departed Safely\n\nüìä View full attendance:\n{attendance_link}\n\nThank you and have a great evening!\n\n- Mabini High School\n  Automated Attendance System",
    "attendance_view_url": "https://ddblgwzylvwuucnpmtzi.supabase.co/rest/v1/attendance?student_id=eq.{student_id}&select=*&order=date.desc,time_in.desc&limit=30",
    "send_on_capture": true,
    "retry_on_failure": true,
    "retry_attempts": 3
  }
}

{
  "camera": {
    "index": "0",
    "resolution": {
      "width": "640",
      "height": "480"
    },
    "fps": 30,
    "force_opencv": true,
    "picamera": {
      "exposure": {
        "mode": "auto",
        "manual_exposure_us": 10000,
        "manual_analogue_gain": 1
      },
      "awb": {
        "mode": "auto"
      }
    }
  },
  "photo": {
    "save_full_frame": true,
    "crop_padding": 40,
    "extra_top": 30,
    "preview_draw_crop_box": true,
    "jpeg_quality": 95,
    "use_high_res_still": false,
    "still_resolution": {
      "width": 640,
      "height": 480
    },
    "still_settle_ms": 100
  },
  "image_processing": {
    "prefer_isp_color": false,
    "denoise_enabled": true,
    "denoise_h": 10,
    "denoise_hColor": 10,
    "denoise_templateWindowSize": 7,
    "denoise_searchWindowSize": 21,
    "awb_grayworld_enabled": false,
    "clahe_enabled": false,
    "clahe_clip_limit": 2,
    "clahe_tile_grid": 8,
    "sharpen_enabled": false,
    "sharpen_amount": 0.4,
    "sharpen_sigma": 0.9,
    "neutral_balance_enabled": false,
    "neutral_balance_strength": 0.4
  },
  "logging": {
    "level": "INFO",
    "log_dir": "data/logs"
  },
  "schedule_validation": {
    "enabled": true,
    "enforce_student_schedules": true,
    "fail_open_on_error": true,
    "allow_no_schedule_students": true,
    "log_violations": true,
    "display_error_duration_ms": 3000
  },
  "cloud": {
    "enabled": true,
    "provider": "supabase",
    "url": "${SUPABASE_URL}",
    "api_key": "${SUPABASE_KEY}",
    "device_id": "${DEVICE_ID}",
    "sync_interval": 60,
    "sync_on_capture": true,
    "cleanup_photos_after_sync": true,
    "offline_queue_size": 1000,
    "retry_attempts": 5,
    "retry_delay": 30,
    "circuit_breaker_threshold": 5,
    "circuit_breaker_timeout": 60,
    "circuit_breaker_success": 2,
    "roster_sync": {
      "auto_sync_on_boot": true,
      "sync_time": "06:00",
      "cache_expiry_hours": 24,
      "auto_wipe_after_class": true,
      "class_end_time": "17:30"
    },
    "schedule_sync": {
      "enabled": true,
      "auto_sync_on_boot": true,
      "use_server_schedules": true,
      "fallback_to_config": true
    }
  },
  "disk_monitor": {
    "warn_threshold_percent": 10,
    "critical_threshold_percent": 5,
    "photo_retention_days": 30,
    "photo_max_size_mb": 500,
    "log_retention_days": 7,
    "photo_dir": "data/photos",
    "log_dir": "data/logs"
  },
  "camera_recovery": {
    "max_init_retries": 3,
    "init_retry_delay": 5,
    "health_check_interval": 30
  },
  "network_timeouts": {
    "connect_timeout": 5,
    "read_timeout": 10,
    "supabase_connect_timeout": 5,
    "supabase_read_timeout": 10,
    "storage_connect_timeout": 5,
    "storage_read_timeout": 30,
    "connectivity_timeout": 3,
    "sms_timeout": 10
  },
  "device_id": "${DEVICE_ID}",
  "alerts": {
    "enabled": true,
    "log_file": "data/logs/alerts.log",
    "alert_file": "data/logs/alerts.json",
    "cooldown_minutes": 5,
    "sms": {
      "enabled": true,
      "admin_numbers": []
    },
    "webhook": {
      "enabled": true,
      "url": "",
      "auth_header": ""
    }
  },
  "lighting": {
    "enabled": true,
    "adaptive_exposure": false,
    "brightness_threshold": 80,
    "contrast_threshold": 40,
    "auto_brightness_adjust": false,
    "histogram_equalization": false,
    "low_light_mode": "off"
  },
  "buzzer": {
    "enabled": true,
    "gpio_pin": 23,
    "qr_detected_pattern": [
      100,
      50,
      100
    ],
    "face_detected_pattern": [
      50
    ],
    "success_pattern": [
      200,
      100,
      200,
      100,
      200
    ],
    "error_pattern": [
      1000
    ],
    "duplicate_pattern": [
      100,
      100,
      100,
      100,
      100
    ]
  },
  "rgb_led": {
    "enabled": true,
    "gpio_pins": {
      "red": 26,
      "green": 6,
      "blue": 24
    },
    "colors": {
      "qr_detected": [
        0,
        0,
        255
      ],
      "face_detected": [
        255,
        80,
        0
      ],
      "success": [
        0,
        255,
        0
      ],
      "error": [
        255,
        0,
        0
      ],
      "duplicate": [
        255,
        150,
        0
      ],
      "late": [
        255,
        80,
        0
      ],
      "processing": [
        200,
        0,
        255
      ]
    },
    "brightness": 30,
    "use_full_brightness": false,
    "fade_duration_ms": 500,
    "hold_duration_ms": 2000
  },
  "power_button": {
    "enabled": true,
    "gpio_pin": 17,
    "wake_gpio_pin": 3,
    "short_press_seconds": 3,
    "long_press_seconds": 5,
    "debounce_ms": 100,
    "min_press_interval_seconds": 2
  },
  "offline_mode": {
    "enabled": true,
    "queue_limit": 1000,
    "auto_sync_when_online": true,
    "check_connection_interval": 30,
    "fallback_mode": "local_only",
    "timeout": 5,
    "test_url": "https://www.google.com"
  },
  "sms_notifications": {
    "enabled": "true",
    "username": "${SMS_USERNAME}",
    "password": "${SMS_PASSWORD}",
    "device_id": "${SMS_DEVICE_ID}",
    "api_url": "${SMS_API_URL}",
    "use_signed_urls": true,
    "signed_url_expiry_hours": 24,
    "attendance_view_url": "https://mabini-hs-attendance.vercel.app/Parents/View.html?student_id={student_id}",
    "quiet_hours": {
      "enabled": true,
      "start": "22:00",
      "end": "06:00"
    },
    "duplicate_sms_cooldown_minutes": 5,
    "retry_on_failure": true,
    "retry_attempts": 3,
    "rate_limiting": {
      "enabled": true,
      "max_per_minute": 10,
      "max_per_hour": 60
    }
  },
  "watchdog": {
    "enabled": true,
    "timeout_seconds": 30,
    "restart_command": "sudo systemctl restart attendance-system",
    "log_file": "data/logs/watchdog_restarts.log"
  },
  "sms_webhook": {
    "enabled": true,
    "port": 8081,
    "host": "0.0.0.0",
    "auth_token": "",
    "log_deliveries": true,
    "retry_failed": false
  },
  "database_backup": {
    "enabled": true,
    "backup_dir": "data/backups",
    "backup_interval_seconds": 3600,
    "keep_backups": 24,
    "check_integrity": true
  },
  "health_endpoint": {
    "enabled": true,
    "port": 8080,
    "host": "0.0.0.0"
  }
}
{
  "camera": {
    "index": "0",
    "resolution": {
      "width": "640",
      "height": "480"
    },
    "fps": 30,
    "picamera": {
      "exposure": {
        "mode": "auto",
        "manual_exposure_us": 10000,
        "manual_analogue_gain": 1
      },
      "awb": {
        "mode": "auto"
      }
    }
  },
  "photo": {
    "save_full_frame": true,
    "crop_padding": 40,
    "extra_top": 30,
    "preview_draw_crop_box": true,
    "jpeg_quality": 95,
    "use_high_res_still": true,
    "still_resolution": {
      "width": 1640,
      "height": 1232
    },
    "still_settle_ms": 700
  },
  "image_processing": {
    "prefer_isp_color": true,
    "denoise_enabled": true,
    "denoise_h": 10,
    "denoise_hColor": 10,
    "denoise_templateWindowSize": 7,
    "denoise_searchWindowSize": 21,
    "awb_grayworld_enabled": false,
    "clahe_enabled": false,
    "clahe_clip_limit": 2,
    "clahe_tile_grid": 8,
    "sharpen_enabled": false,
    "sharpen_amount": 0.4,
    "sharpen_sigma": 0.9,
    "neutral_balance_enabled": false,
    "neutral_balance_strength": 0.4
  },
  "logging": {
    "level": "INFO",
    "log_dir": "data/logs"
  },
  "school_schedule": {
    "morning_class": {
      "start_time": "07:00",
      "end_time": "12:00",
      "login_window_start": "06:30",
      "login_window_end": "07:30",
      "logout_window_start": "11:30",
      "logout_window_end": "12:30",
      "late_threshold_minutes": 15
    },
    "afternoon_class": {
      "start_time": "13:00",
      "end_time": "17:00",
      "login_window_start": "",
      "login_window_end": "13:30",
      "logout_window_start": "16:30",
      "logout_window_end": "17:30",
      "late_threshold_minutes": 15
    },
    "auto_detect_session": true,
    "allow_early_arrival": true,
    "require_logout": true,
    "duplicate_scan_cooldown_minutes": 5
  },
  "cloud": {
    "enabled": true,
    "provider": "supabase",
    "url": "${SUPABASE_URL}",
    "api_key": "${SUPABASE_KEY}",
    "device_id": "${DEVICE_ID}",
    "sync_interval": 60,
    "sync_on_capture": true,
    "cleanup_photos_after_sync": true,
    "offline_queue_size": 1000,
    "retry_attempts": 5,
    "retry_delay": 30,
    "circuit_breaker_threshold": 5,
    "circuit_breaker_timeout": 60,
    "circuit_breaker_success": 2,
    "roster_sync": {
      "auto_sync_on_boot": true,
      "sync_time": "06:00",
      "cache_expiry_hours": 24,
      "auto_wipe_after_class": true,
      "class_end_time": "17:30"
    }
  },
  "disk_monitor": {
    "warn_threshold_percent": 10,
    "critical_threshold_percent": 5,
    "photo_retention_days": 30,
    "photo_max_size_mb": 500,
    "log_retention_days": 7,
    "photo_dir": "data/photos",
    "log_dir": "data/logs"
  },
  "camera_recovery": {
    "max_init_retries": 3,
    "init_retry_delay": 5,
    "health_check_interval": 30
  },
  "network_timeouts": {
    "connect_timeout": 5,
    "read_timeout": 10,
    "supabase_connect_timeout": 5,
    "supabase_read_timeout": 10,
    "storage_connect_timeout": 5,
    "storage_read_timeout": 30,
    "connectivity_timeout": 3,
    "sms_timeout": 10
  },
  "shutdown": {
    "timeout": 30,
    "persist_state": true,
    "state_file": "data/system_state.json"
  },
  "metrics": {
    "enabled": true,
    "export_format": "prometheus"
  },
  "admin_dashboard": {
    "enabled": true,
    "host": "0.0.0.0",
    "port": 8080,
    "auth_enabled": true,
    "multi_device_enabled": false,
    "allowed_ips": [
      "127.0.0.1",
      "192.168.1.0/24",
      "100.64.0.0/10"
    ]
  },
  "device_id": "${DEVICE_ID}",
  "device_name": "IT Lab - Main Device",
  "location": {
    "building": "Main Building",
    "floor": "Floor 1",
    "room": "IT Lab",
    "description": "Main Building - Floor 1 IT Lab"
  },
  "alerts": {
    "enabled": true,
    "log_file": "data/logs/alerts.log",
    "alert_file": "data/logs/alerts.json",
    "cooldown_minutes": 5,
    "sms": {
      "enabled": false,
      "admin_numbers": []
    },
    "webhook": {
      "enabled": false,
      "url": "",
      "auth_header": ""
    }
  },
  "lighting": {
    "enabled": true,
    "adaptive_exposure": false,
    "brightness_threshold": 80,
    "contrast_threshold": 40,
    "auto_brightness_adjust": false,
    "histogram_equalization": false,
    "low_light_mode": "off"
  },
  "buzzer": {
    "enabled": true,
    "gpio_pin": 23,
    "qr_detected_pattern": [
      100,
      50,
      100
    ],
    "face_detected_pattern": [
      50
    ],
    "success_pattern": [
      200,
      100,
      200,
      100,
      200
    ],
    "error_pattern": [
      1000
    ],
    "duplicate_pattern": [
      100,
      100,
      100,
      100,
      100
    ]
  },
  "rgb_led": {
    "enabled": true,
    "gpio_pins": {
      "red": 22,
      "green": 27,
      "blue": 17
    },
    "colors": {
      "qr_detected": [
        0,
        0,
        255
      ],
      "face_detected": [
        255,
        165,
        0
      ],
      "success": [
        0,
        255,
        0
      ],
      "error": [
        255,
        0,
        0
      ],
      "duplicate": [
        255,
        255,
        0
      ],
      "late": [
        255,
        165,
        0
      ],
      "processing": [
        255,
        0,
        255
      ]
    },
    "brightness": 100,
    "use_full_brightness": true,
    "fade_duration_ms": 500,
    "hold_duration_ms": 2000
  },
  "power_button": {
    "enabled": true,
    "gpio_pin": 3,
    "short_press_seconds": 3,
    "long_press_seconds": 5,
    "debounce_ms": 100,
    "min_press_interval_seconds": 2
  },
  "offline_mode": {
    "enabled": true,
    "queue_limit": 1000,
    "auto_sync_when_online": true,
    "check_connection_interval": 30,
    "fallback_mode": "local_only",
    "timeout": 5,
    "test_url": "https://www.google.com"
  },
  "sms_notifications": {
    "enabled": "true",
    "username": "${SMS_USERNAME}",
    "password": "${SMS_PASSWORD}",
    "device_id": "${SMS_DEVICE_ID}",
    "api_url": "${SMS_API_URL}",
    "use_signed_urls": true,
    "signed_url_expiry_hours": 24,
    "login_message_template": "\ud83d\udcda MABINI HIGH SCHOOL\n\n\u2705 CHECK-IN: {student_name}\n\ud83d\udd50 {time} | {date}\n\nView: {attendance_link}",
    "logout_message_template": "\ud83d\udcda MABINI HIGH SCHOOL\n\n\ud83c\udfc1 CHECK-OUT: {student_name}\n\ud83d\udd50 {time} | {date}\n\nView: {attendance_link}",
    "late_arrival_template": "\u26a0\ufe0f LATE ARRIVAL\n\n{student_name} checked in at {time}\n({minutes_late} mins late)\n\ud83d\udcc5 {date}\n\nView: {attendance_link}\n\n- Mabini High School",
    "no_checkout_template": "\u26a0\ufe0f NO CHECK-OUT\n\n{student_name} did not check out today.\nLast seen: {last_checkin_time}\n\nPlease verify.\n\nView: {attendance_link}\n\n- Mabini High School",
    "absence_alert_template": "\u2757 ABSENCE ALERT\n\n{student_name} not detected at school today ({date}).\n\nIf excused, please contact office.\n\nView: {attendance_link}\n\n- Mabini High School",
    "weekly_summary_template": "\ud83d\udcca WEEKLY SUMMARY\n\n{student_name}\nPresent: {days_present}/{total_days}\nLate: {late_count}\nAbsent: {absent_count}\n\nView: {attendance_link}\n\n- Mabini High School",
    "monthly_summary_template": "\ud83d\udcca MONTHLY SUMMARY\n\n{student_name}\nPresent: {days_present}/{total_days} ({percentage}%)\nLate: {late_count} times\nAbsent: {absent_count} days\n\nView: {attendance_link}\n\n- Mabini High School",
    "attendance_view_url": "https://cerjho.github.io/IoT-Attendance-System/view-attendance.html?student_id={student_id}",
    "send_on_capture": true,
    "send_late_alerts": true,
    "send_absence_alerts": false,
    "send_no_checkout_alerts": false,
    "send_weekly_summary": false,
    "send_monthly_summary": false,
    "notification_preferences": {
      "check_in": true,
      "check_out": true,
      "late_arrival": true,
      "absence": false,
      "no_checkout": false,
      "weekly_summary": false,
      "monthly_summary": false
    },
    "quiet_hours": {
      "enabled": true,
      "start": "22:00",
      "end": "06:00"
    },
    "duplicate_sms_cooldown_minutes": 5,
    "retry_on_failure": true,
    "retry_attempts": 3,
    "include_unsubscribe": true,
    "unsubscribe_text": "\n\nReply STOP to unsubscribe"
  }
}